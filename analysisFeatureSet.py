import pandas as pd

topnList=[4, 8, 12, 16, 20, 30, 50, 100, 200, 400, 800, 1200, 1500, 2000, 4000]
# topnList=[6]

topFeatureSets = {}
IGFeatureSets = {}
IGstep5FeatureSets = {}

for topn in topnList:
    if topn <= 30:
        featureData = pd.read_csv("E:/msmalware/compare/sub200featuresWhenLessThan30Top"+str(topn)+"_3gram.csv")
    else:
        featureData = pd.read_csv("E:/msmalware/compare/sub200featuresTop"+str(topn)+"_3gram.csv")
    featureList = list(featureData.columns.values)
    featureList.pop(0)
    featureSet = set(featureList)
    print featureSet
    topFeatureSets[topn] = featureSet

step = 1
for topn in topnList:
    if topn <= 30:
        featureData = pd.read_csv("E:/msmalware/compare/sub200featuresWhenLessThan30IG(step"+str(step)+")Top"+str(topn)+"_3gram.csv")
    else:
        featureData = pd.read_csv("E:/msmalware/compare/sub200featuresIG(step"+str(step)+")Top"+str(topn)+"_3gram.csv")
    featureList = list(featureData.columns.values)
    featureList.pop(0)
    featureSet = set(featureList)
    print featureSet
    IGFeatureSets[topn] = featureSet

step = 5
for topn in topnList:
    if topn <= 30:
        featureData = pd.read_csv("E:/msmalware/compare/sub200featuresWhenLessThan30IG(step"+str(step)+")Top"+str(topn)+"_3gram.csv")
    else:
        featureData = pd.read_csv("E:/msmalware/compare/sub200featuresIG(step"+str(step)+")Top"+str(topn)+"_3gram.csv")
    featureList = list(featureData.columns.values)
    featureList.pop(0)
    featureSet = set(featureList)
    print featureSet
    IGstep5FeatureSets[topn] = featureSet

unionSets = {}
for topn in topnList:
    unionSet = topFeatureSets[topn] & IGFeatureSets[topn] & IGstep5FeatureSets[topn]
    print "len of unionSet:", len(unionSet), "when has", topn, "features"
    unionSets[topn] = len(unionSet) / float(topn)
