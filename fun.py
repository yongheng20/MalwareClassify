import numpy as np
from collections import *

def calEnt(rawList):
    length = float(len(rawList))
    c = Counter(rawList)
    distribution = [v/length for v in c.values()]
    ent = 0
    for p in distribution:
        ent -= p * np.log2(p)
    return ent

data = {
    '1': {'color': 'green', 'texture': 'clear', 'good': 'yes'},
    '2': {'color': 'black', 'texture': 'clear', 'good': 'yes'},
    '3': {'color': 'black', 'texture': 'clear', 'good': 'yes'},
    '4': {'color': 'green', 'texture': 'clear', 'good': 'yes'},
    '5': {'color': 'white', 'texture': 'clear', 'good': 'yes'},
    '6': {'color': 'green', 'texture': 'clear', 'good': 'yes'},
    '7': {'color': 'black', 'texture': 'abitblurry', 'good': 'yes'},
    '8': {'color': 'black', 'texture': 'clear', 'good': 'yes'},
    '9':  {'color': 'black', 'texture': 'abitblurry', 'good': 'no'},
    '10': {'color': 'green', 'texture': 'clear', 'good': 'no'},
    '11': {'color': 'white', 'texture': 'blurry', 'good': 'no'},
    '12': {'color': 'white', 'texture': 'blurry', 'good': 'no'},
    '13': {'color': 'green', 'texture': 'abitblurry', 'good': 'no'},
    '14': {'color': 'white', 'texture': 'abitblurry', 'good': 'no'},
    '15': {'color': 'black', 'texture': 'clear', 'good': 'no'},
    '16': {'color': 'white', 'texture': 'blurry', 'good': 'no'},
    '17': {'color': 'green', 'texture': 'abitblurry', 'good': 'no'}
}

feature = 'texture'
d = data.keys()
draw = []
for id in d:
    draw.append(data[id]['good'])
dent = calEnt(draw)

colorPartitionRawMap = defaultdict(list)
for id in d:
    colorPartitionRawMap[data[id][feature]].append(data[id]['good'])
print colorPartitionRawMap

colorPartitionEntMap = {}
for colortype, raw in colorPartitionRawMap.iteritems():
    colorPartitionEntMap[colortype] = tuple([calEnt(raw), len(raw)/float(len(d))])
print colorPartitionEntMap

sumEnt = 0.0
for v in colorPartitionEntMap.values():
    sumEnt += np.cumprod(v)[-1]  # v[0]*v[1]

print "information increase: ", dent-sumEnt

'''
d = range(1, 18)
draw = []
for i in d:
    draw.append(data[str(i)]['good'])
dent = calEnt(draw)

d1 = []  # 'green'
d2 = []  # 'black'
d3 = []  # 'white'
for i in d:
    if data[str(i)]['color'] == 'green':
        d1.append(i)
    elif data[str(i)]['color'] == 'black':
        d2.append(i)
    else:
        d3.append(i)

d1raw = []
for i in d1:
    d1raw.append(data[str(i)]['good'])
d1ent = calEnt(d1raw)
print "d1 entropy:", d1ent

d2raw = []
for i in d2:
    d2raw.append(data[str(i)]['good'])
d2ent = calEnt(d2raw)
print "d2 entropy:", d2ent

d3raw = []
for i in d3:
    d3raw.append(data[str(i)]['good'])
d3ent = calEnt(d3raw)
print "d3 entropy:", d3ent

conent = len(d1)/float(len(d))*d1ent + len(d2)/float(len(d))*d2ent + len(d3)/float(len(d))*d3ent

print "\nd entropy:", dent

print "\ninformation increase:", (dent-conent)
'''
